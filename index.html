<html>
<head></head>
<body>
<script type='text/javascript'>
	function initEmbeddedMessaging() {
		try {
			embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'

			embeddedservice_bootstrap.init(
				'00DO800000Gjfc5',
				'Messaging_Web',
				'https://marinecreditunion--stage.sandbox.my.site.com/ESWMessagingWeb1758567833973',
				{
					scrt2URL: 'https://marinecreditunion--stage.sandbox.my.salesforce-scrt.com'
				}
			);
		} catch (err) {
			console.error('Error loading Embedded Messaging: ', err);
		}
	};
	
window.addEventListener("onEmbeddedMessagingReady", () => {
        console.log("Enhanced Chat is ready!");

        // Fetch browser details
        const fetchBrowserName = () => {
            const userAgent = navigator.userAgent;
            if (userAgent.includes("Opera") || userAgent.includes("Opr")) return "Opera";
            if (userAgent.includes("Edg")) return "Edge";
            if (userAgent.includes("Chrome")) return "Chrome";
            if (userAgent.includes("Safari")) return "Safari";
            if (userAgent.includes("Firefox")) return "Firefox";
            return "Unknown";
        };

        const browserName = fetchBrowserName();
        const browserLanguage = navigator.language;
        const browserPlatform = navigator.platform;
		const userAgentString = navigator.userAgent;

        // Pass data to Salesforce
        embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
            "BrowserName": browserName,
            "BrowserLanguage": browserLanguage,
            "BrowserPlatform": browserPlatform,
			"UserAgent": userAgentString
        });
    });
</script>
<script type='text/javascript' src='https://marinecreditunion--stage.sandbox.my.site.com/ESWMessagingWeb1758567833973/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>





